# Heartwood - Centralized Authentication Service
# Public Name: Heartwood | Internal Codename: GroveAuth
# Public Domain: heartwood.grove.place
# API Domain: auth-api.grove.place (internal backend)

name = "groveauth"
main = "src/index.ts"
compatibility_date = "2024-12-01"
workers_dev = true

# Production environment variables
[vars]
AUTH_BASE_URL = "https://auth-api.grove.place"
ENVIRONMENT = "production"

# D1 Database binding (Heartwood auth data)
[[d1_databases]]
binding = "DB"
database_name = "groveauth"
database_id = "45eae4c7-8ae7-4078-9218-8e1677a4360f"

# D1 Database binding (GroveEngine data - email signups, etc.)
[[d1_databases]]
binding = "ENGINE_DB"
database_name = "grove-engine-db"
database_id = "a6394da2-b7a6-48ce-b7fe-b1eb3e730e68"

# Custom domain for API
[[routes]]
pattern = "auth-api.grove.place"
custom_domain = true

# Secrets (set via `wrangler secret put <NAME>`):
# - JWT_PRIVATE_KEY: RSA private key for signing JWTs (PEM format)
# - JWT_PUBLIC_KEY: RSA public key for verifying JWTs (PEM format)
# - GOOGLE_CLIENT_ID: Google OAuth client ID
# - GOOGLE_CLIENT_SECRET: Google OAuth client secret
# - GITHUB_CLIENT_ID: GitHub OAuth client ID
# - GITHUB_CLIENT_SECRET: GitHub OAuth client secret
# - RESEND_API_KEY: Resend API key for sending emails
